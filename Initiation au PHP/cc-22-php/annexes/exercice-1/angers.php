<?php
$labels = [
    "année" => "Année",
    "Tmin" => "Température minimum [°C]",
    "Tmax" => "Température maximum [°C]",
    "Tmean" => "Température moyenne",
    "vent" => "Rafale maximum [km/h]",
    "soleil" => "Ensoleillement [h]",
    "pluie" => "Précipitations totales [mm]",
    "Pmin" => "Pression horaire minimale [hPa]",
    "Pmax" => "Pression horaire maximale [hPa]"
];

$angers = [
    ["année" => 2001, "Tmin" => -7.4, "Tmax" => 35.2, "Tmean" => 11.8, "vent" => 96.3, "soleil" => "1834h 6min", "pluie" => 786.4, "Pmin" => 986.7, "Pmax" => 1041],
    ["année" => 2002, "Tmin" => -5.0, "Tmax" => 35.0, "Tmean" => 12.5, "vent" => 107.4, "soleil" => "1739h 30min", "pluie" => 794.2, "Pmin" => 977.3, "Pmax" => 1036.9],
    ["année" => 2003, "Tmin" => -7.9, "Tmax" => 38.3, "Tmean" => 12.7, "vent" => 96.3, "soleil" => "2111h 0min", "pluie" => 715.4, "Pmin" => 976.4, "Pmax" => 1040.2],
    ["année" => 2004, "Tmin" => -4.9, "Tmax" => 33.8, "Tmean" => 11.9, "vent" => 94.5, "soleil" => "1866h 42min", "pluie" => 568.8, "Pmin" => 985.4, "Pmax" => 1037.4],
    ["année" => 2005, "Tmin" => -10.6, "Tmax" => 36.1, "Tmean" => 12.3, "vent" => 90.7, "soleil" => "1920h 24min", "pluie" => 497.8, "Pmin" => 985.6, "Pmax" => 1041],
    ["année" => 2006, "Tmin" => -25.5, "Tmax" => 36.9, "Tmean" => 12.5, "vent" => 107.4, "soleil" => "1814h 30min", "pluie" => 686.2, "Pmin" => 980.8, "Pmax" => 1039.7],
    ["année" => 2007, "Tmin" => -6.9, "Tmax" => 32.4, "Tmean" => 12.2, "vent" => 90.7, "soleil" => "1781h 6min", "pluie" => 748.4, "Pmin" => 990.2, "Pmax" => 1042.8],
    ["année" => 2008, "Tmin" => -4.8, "Tmax" => 31.1, "Tmean" => 11.7, "vent" => 103.7, "soleil" => "1764h 48min", "pluie" => 714.4, "Pmin" => 983, "Pmax" => 1044.2],
    ["année" => 2009, "Tmin" => -25.5, "Tmax" => 34.9, "Tmean" => 12.1, "vent" => 103.7, "soleil" => "1958h 24min", "pluie" => 725.8, "Pmin" => 973.6, "Pmax" => 1035],
    ["année" => 2010, "Tmin" => -6.3, "Tmax" => 35.1, "Tmean" => 11.4, "vent" => 100.0, "soleil" => "1969h 0min", "pluie" => 580.6, "Pmin" => 969.1, "Pmax" => 1038.3],
    ["année" => 2011, "Tmin" => -5.4, "Tmax" => 35.5, "Tmean" => 12.7, "vent" => 96.3, "soleil" => "1542h 48min", "pluie" => 486.7, "Pmin" => 986.3, "Pmax" => 1039.8],
    ["année" => 2012, "Tmin" => -10.5, "Tmax" => 35.7, "Tmean" => 11.9, "vent" => 88.9, "soleil" => "1848h 24min", "pluie" => 734.8, "Pmin" => 983.8, "Pmax" => 1039.7],
    ["année" => 2013, "Tmin" => -4.5, "Tmax" => 35.1, "Tmean" => 11.7, "vent" => 83.3, "soleil" => "1671h 18min", "pluie" => 714.7, "Pmin" => 987, "Pmax" => 1042],
    ["année" => 2014, "Tmin" => -6.6, "Tmax" => 33.7, "Tmean" => 13.9, "vent" => 75.9, "soleil" => "1236h 6min", "pluie" => 529.4, "Pmin" => 987.1, "Pmax" => 1043.4],
    ["année" => 2015, "Tmin" => -5.3, "Tmax" => 36.0, "Tmean" => 12.8, "vent" => 87.0, "soleil" => "1953h 24min", "pluie" => 660.5, "Pmin" => 985.5, "Pmax" => 1042.5],
    ["année" => 2016, "Tmin" => -7.0, "Tmax" => 37.8, "Tmean" => 12.3, "vent" => 94.5, "soleil" => "1812h 0min", "pluie" => 742.4, "Pmin" => "--", "Pmax" => 1043.4],
    ["année" => 2017, "Tmin" => -7.6, "Tmax" => 36.8, "Tmean" => 12.7, "vent" => 55.6, "soleil" => "2006h 0min", "pluie" => 602.7, "Pmin" => "--", "Pmax" => 1041.1],
    ["année" => 2018, "Tmin" => -7.5, "Tmax" => 36.1, "Tmean" => 13.1, "vent" => 46.3, "soleil" => "1999h 18min", "pluie" => 869.4, "Pmin" => 981.3, "Pmax" => 1039.9],
    ["année" => 2019, "Tmin" => -3.0, "Tmax" => 40.7, "Tmean" => 13.3, "vent" => 50.0, "soleil" => "2283h 12min", "pluie" => 751.8, "Pmin" => "--", "Pmax" => 1041.6],
    ["année" => 2020, "Tmin" => -1.7, "Tmax" => 38.7, "Tmean" => 13.5, "vent" => 53.7, "soleil" => "2122h 6min", "pluie" => 735.5, "Pmin" => "--", "Pmax" => 1045.8],
    ["année" => 2021, "Tmin" => -5.2, "Tmax" => 32.3, "Tmean" => 12.2, "vent" => 59.3, "soleil" => "1943h 24min", "pluie" => 597.0, "Pmin" => "--", "Pmax" => 1038.8],
    ["année" => 2022, "Tmin" => -5.0, "Tmax" => 40.7, "Tmean" => 13.9, "vent" => 46.3, "soleil" => "1999h 12min", "pluie" => 442.6, "Pmin" => 988.8, "Pmax" => 1040.7],
    ["année" => "Total", "Tmin" => -25.5, "Tmax" => 40.7, "Tmean" => 12.3, "vent" => 107.4, "soleil" => "42758h 36min", "pluie" => 15535.5, "Pmin" => "--", "Pmax" => 1045.8],
];

/////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Question 1 : Ajoutez en première position dans $angers un tableau associatif utilisant les mêmes clés que les autres et modélisant les données :
// année 2000,
// température minimum -6.3,
// maximum 34.3,
// et moyenne 12.7,
// rafale maximum 94.5,
// ensoleillement 1533h 6min,
// précipitations 775.4,
// pression minimale 971
// et maximale 1036.9.
array_unshift($angers, [
    "année" => 2000,
    "Tmin" => -6.3,
    "Tmax" => 34.3,
    "Tmean" => 12.7,
    "vent" => 94.5,
    "soleil" => "1533h 6min",
    "pluie" => 775.4,
    "Pmin" => 971,
    "Pmax" => 1036.9
]);


// Question 2 : Supprimez le dernier tableau d'$angers.
array_pop($angers);
// Question 3 : Supprimez tout tableau d'$angers ayant pour pression minimale la valeur "--".
$angers=array_filter($angers, function($c)
{
    return $c['Pmin'] != "--";
});

// Question 4 : Supprimez la ``colonne'' d'$angers correspondant aux températures moyennes.
foreach ($angers as &$c) {
    unset($c['Tmean']);
}

// Question 5 : Triez les tableaux d'$angers par température maximum croissante et, en cas d'égalité, par précipitations décroissantes. 
usort($angers , function($a, $b){
    if($a['Tmax'] === $b['Tmax'])
    {
        return  $b['pluie']<=> $a['pluie'];
    }
    else return $a['Tmax'] <=> $b['Tmax'];
});


// Question 6 : Créez un tableau $soleils contenant les valeurs d'ensoleillement arrondies à l'heure supérieure quand le nombre de minutes est non nul.
// Calculez-en la moyenne que vous stockerez dans la variable $soleil.


// Question 7 : Remplacez chaque valeur d'ensoleillement dans $angers par une paire contenant la valeur arrondie (calculée dans  $soleils) 
// et le caractère 'S'  (respectivement, 'I') si cette valeur est supérieure (resp. inférieure) à la moyenne $soleil.

/////////////////////////////////////////////////////////////////////////////////////////////////////////////

require __DIR__ . "/gabarit.php";

/** Tableau final attendu 
$angers = array(
    0 => array('année' => 2008, 'Tmin' => -4.8, 'Tmax' => 31.1, 'vent' => 103.7, 'soleil' => array(0 => 1765, 1 => 'I', ), 'pluie' => 714.4, 'Pmin' => 983, 'Pmax' => 1044.2,
    ),
    1 => array('année' => 2007, 'Tmin' => -6.9, 'Tmax' => 32.4, 'vent' => 90.7, 'soleil' => array(0 => 1782, 1 => 'I', ), 'pluie' => 748.4, 'Pmin' => 990.2, 'Pmax' => 1042.8,
    ),
    2 => array('année' => 2014, 'Tmin' => -6.6, 'Tmax' => 33.7, 'vent' => 75.9, 'soleil' => array(0 => 1237, 1 => 'I', ), 'pluie' => 529.4, 'Pmin' => 987.1, 'Pmax' => 1043.4,
    ),
    3 => array('année' => 2004, 'Tmin' => -4.9, 'Tmax' => 33.8, 'vent' => 94.5, 'soleil' => array(0 => 1867, 1 => 'S', ), 'pluie' => 568.8, 'Pmin' => 985.4, 'Pmax' => 1037.4,
    ),
    4 => array('année' => 2000, 'Tmin' => -6.3, 'Tmax' => 34.3, 'vent' => 94.5, 'soleil' => array(0 => 1534, 1 => 'I', ), 'pluie' => 775.4, 'Pmin' => 971, 'Pmax' => 1036.9,
    ),
    5 => array('année' => 2009, 'Tmin' => -25.5, 'Tmax' => 34.9, 'vent' => 103.7, 'soleil' => array(0 => 1959, 1 => 'S', ), 'pluie' => 725.8, 'Pmin' => 973.6, 'Pmax' => 1035,
    ),
    6 => array('année' => 2002, 'Tmin' => -5.0, 'Tmax' => 35.0, 'vent' => 107.4, 'soleil' => array(0 => 1740, 1 => 'I', ), 'pluie' => 794.2, 'Pmin' => 977.3, 'Pmax' => 1036.9,
    ),
    7 => array('année' => 2013, 'Tmin' => -4.5, 'Tmax' => 35.1, 'vent' => 83.3, 'soleil' => array(0 => 1672, 1 => 'I', ), 'pluie' => 714.7, 'Pmin' => 987, 'Pmax' => 1042,
    ),
    8 => array('année' => 2010, 'Tmin' => -6.3, 'Tmax' => 35.1, 'vent' => 100.0, 'soleil' => array(0 => 1970, 1 => 'S', ), 'pluie' => 580.6, 'Pmin' => 969.1, 'Pmax' => 1038.3,
    ),
    9 => array('année' => 2001, 'Tmin' => -7.4, 'Tmax' => 35.2, 'vent' => 96.3, 'soleil' => array(0 => 1835, 1 => 'S', ), 'pluie' => 786.4, 'Pmin' => 986.7, 'Pmax' => 1041,
    ),
    10 => array('année' => 2011, 'Tmin' => -5.4, 'Tmax' => 35.5, 'vent' => 96.3, 'soleil' => array(0 => 1543, 1 => 'I', ), 'pluie' => 486.7, 'Pmin' => 986.3, 'Pmax' => 1039.8,
    ),
    11 => array('année' => 2012, 'Tmin' => -10.5, 'Tmax' => 35.7, 'vent' => 88.9, 'soleil' => array(0 => 1849, 1 => 'S', ), 'pluie' => 734.8, 'Pmin' => 983.8, 'Pmax' => 1039.7,
    ),
    12 => array('année' => 2015, 'Tmin' => -5.3, 'Tmax' => 36.0, 'vent' => 87.0, 'soleil' => array(0 => 1954, 1 => 'S', ), 'pluie' => 660.5, 'Pmin' => 985.5, 'Pmax' => 1042.5,
    ),
    13 => array('année' => 2018, 'Tmin' => -7.5, 'Tmax' => 36.1, 'vent' => 46.3, 'soleil' => array(0 => 2000, 1 => 'S', ), 'pluie' => 869.4, 'Pmin' => 981.3, 'Pmax' => 1039.9,
    ),
    14 => array('année' => 2005, 'Tmin' => -10.6, 'Tmax' => 36.1, 'vent' => 90.7, 'soleil' => array(0 => 1921, 1 => 'S', ), 'pluie' => 497.8, 'Pmin' => 985.6, 'Pmax' => 1041,
    ),
    15 => array('année' => 2006, 'Tmin' => -25.5, 'Tmax' => 36.9, 'vent' => 107.4, 'soleil' => array(0 => 1815, 1 => 'S', ), 'pluie' => 686.2, 'Pmin' => 980.8, 'Pmax' => 1039.7,
    ),
    16 => array('année' => 2003, 'Tmin' => -7.9, 'Tmax' => 38.3, 'vent' => 96.3, 'soleil' => array(0 => 2112, 1 => 'S', ), 'pluie' => 715.4, 'Pmin' => 976.4, 'Pmax' => 1040.2,
    ),
    17 => array('année' => 2022, 'Tmin' => -5.0, 'Tmax' => 40.7, 'vent' => 46.3, 'soleil' => array(0 => 2000, 1 => 'S', ), 'pluie' => 442.6, 'Pmin' => 988.8, 'Pmax' => 1040.7,
    )
);
/**/
?>